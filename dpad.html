<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steuerkreuz mit Slider</title>
    <style>
        .dpad-container {
            display: grid;
            grid-template-areas:
                ". up ."
                "left center right"
                ". down .";
            gap: 10px;
            width: 120px;
            margin: 50px auto;
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
        }

        .button {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #333;
            color: white;
            font-size: 18px;
            cursor: pointer;
            border: 2px solid #444;
            border-radius: 5px;
        }

        .up {
            grid-area: up;
        }

        .down {
            grid-area: down;
        }

        .left {
            grid-area: left;
        }

        .right {
            grid-area: right;
        }

        .center {
            grid-area: center;
            background-color: #555;
        }

        .button:hover {
            background-color: #666;
        }

        .slider-container {
            display: grid;
            width: 50px;
            position: absolute;
            right: 180px;
            top: 44%;

        }

        .slider {
            width: 80%;
            margin-top: 10px;
        }

        input[type=range] {
            writing-mode: vertical-lr;
            direction: rtl;
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <script>
        const Directions = Object.freeze({
            UP: 'up',
            DOWN: 'down',
            RIGHT: 'right',
            LEFT: 'left',
            HALT: 'halt'
        });

        let currentDirection = Directions.HALT;

        var speed = 50;
        function speed_change(input_speed) {
            speed = input_speed;
        }

        function send(direction) {
            if (currentDirection !== direction) {
                currentDirection = direction;
                var xhr = new XMLHttpRequest();
                xhr.open("GET", "/coords?speed=" + speed + "&direction=" + direction, true);
                xhr.send();
                console.log("Direction: " + direction + " Speed: " + speed);
            }
        }

        function stop() {
            if (currentDirection !== Directions.HALT) {
                currentDirection = Directions.HALT;
                console.log("Direction: halt");
            }
        }

        function updateSliderValue(value) {
            console.log("Slider Wert: " + value);
        }
    </script>

    <div class="dpad-container">
        <div class="button up" onmousedown="send(Directions.UP)" ontouchstart="send(Directions.UP)" onmouseup="stop()"
            ontouchend="stop()" onmouseleave="stop()">↑</div>
        <div class="button left" onmousedown="send(Directions.LEFT)" ontouchstart="send(Directions.LEFT)"
            onmouseup="stop()" ontouchend="stop()" onmouseleave="stop()">←</div>

        <div class="button right" onmousedown="send(Directions.RIGHT)" ontouchstart="send(Directions.RIGHT)"
            onmouseup="stop()" ontouchend="stop()" onmouseleave="stop()">→</div>
        <div class="button down" onmousedown="send(Directions.DOWN)" ontouchstart="send(Directions.DOWN)"
            onmouseup="stop()" ontouchend="stop()" onmouseleave="stop()">↓</div>
    </div>

    <div class="slider-container">
        <input type="range" min="0" max="100" value="50" class="slider" id="rangeSlider"
            oninput="speed_change(this.value)">
    </div>

</body>

</html>